<aside th:fragment="sidebar(sidebarData)">
    <div class="sidebar">
        <div class="login-sidebar" sec:authorize="!isAuthenticated()" >
            <h1 class="sidebar-title" >Авторизация</h1>
            <a href="/login" th:href="@{/login}">Вход</a>
            <br>
            <a href="/registration" th:href="@{/registration}">Регистрация</a>
        </div>

        <div class="login-sidebar" sec:authorize="isAuthenticated()">
            <h1  class="sidebar-title" sec:authentication="name">Username</h1>
            <img class ="user-avatar" th:src="${#authentication.principal.avatar}">
            <div sec:authorize="hasRole('ROLE_EDITOR')">
                <a class="dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Возможности редактора</a>
                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="/editor/addnews" th:href="@{/editor/addnews}">Добавить новость</a>
                    <a class="dropdown-item" href="/editor/addperson" th:href="@{/editor/addperson}">Добавить персону</a>
                    <a class="dropdown-item" href="/editor/addplace" th:href="@{/editor/addplace}">Добавить место</a>
                    <a class="dropdown-item" href="/editor/addaffiche" th:href="@{/editor/addaffiche}">Добавить афишу</a>
                </div>
            </div>
            <a class="nav-link nav-item" th:href="@{/user/selfProfile}">Профиль</a>
            <a class="nav-link nav-item" href="/logout" th:href="@{/logout}">Выход</a>
        </div>
    </div>
    <div  class="sidebar">
        <h1 class="sidebar-title">Поиск</h1>
        <script async src="https://cse.google.com/cse.js?cx=005400633405089873328:1qbbmotod7m"></script>
        <div class="gcse-search"></div>
    </div>
    <div class ="sidebar">

        <h1 class="sidebar-title">Последние новости</h1>
        <ul class = "last-news-list" th:each = "news:${sidebarData}">
            <li>
                <a th:href="@{'/news/' + ${news.newsId}}"> <img th:src = "@{${news.picture}}" width="150" > </a>
                <a  th:href="@{'/news/' + ${news.newsId}}" th:text="${news.title}"> Название новости</a>
                <p class="post-desc" th:text="${news.shortDescription}"> Краткое описание новости</p>

            </li>
        </ul>
    </div>
    <div class="sidebar">
        <h1 class="sidebar-title">Календарь событий</h1>
        <form action="#" th:action="@{/pickdate}" method="POST">
            <div class="form-group row">
                <div class="col-md-4 mt-5">
                    <div class="input-group date">
                        <input type="text" class="form-control" autocomplete="off" th:object="*{date}"/>
                        <div class="input-group-append">
                            <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" type="submit">Поиск событий</button>
        </form>
    </div>

    <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script th:src="@{/webjars/popper.js/umd/popper.min.js}"></script>
    <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    <script th:src="@{assets/bootstrap-datepicker/js/bootstrap-datepicker.js}"></script>

    <script>
        $('.input-group.date').datepicker({
            autoclose: true,
            todayHighlight: true
        });
    </script>

</aside>